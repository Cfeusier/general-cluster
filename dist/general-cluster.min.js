"use strict";function _isExpressApp(maybe){return!!maybe&&!!maybe.set&&!!maybe.use}function _charge(theGeneral,listenArgs){if(cluster.isMaster)for(var i=0;cpus>i;i++)cluster.fork();else"number"!=typeof listenArgs[0]&&listenArgs.unshift(3e3),theGeneral.listen.apply(theGeneral,listenArgs);return theGeneral}function GeneralCluster(app){var theGeneral;app?theGeneral=_isExpressApp(app)?app:express(app):(theGeneral=express(),theGeneral.get("/*",function(req,res){res.send("Hello World")}));var listenArgs=Array.prototype.slice.call(arguments,1);return _charge(theGeneral,listenArgs)}var express=require("express"),cluster=require("cluster"),cpus=require("os").cpus().length;module.exports=GeneralCluster;